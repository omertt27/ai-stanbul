// Extended Test Inputs for Istanbul Guide Chatbot - Additional 100 Test Cases
// This extends the original 50 test cases with more comprehensive coverage

export const extendedTestInputs = [
  // ADDITIONAL RESTAURANTS & FOOD (25 questions)
  {
    id: 51,
    category: "Restaurants",
    input: "Halal restaurants near Grand Bazaar",
    expectedTopics: ["halal", "Grand Bazaar", "restaurants", "Islamic food"]
  },
  {
    id: 52,
    category: "Restaurants", 
    input: "Best Turkish breakfast in Çukurcuma",
    expectedTopics: ["Turkish breakfast", "Çukurcuma", "kahvaltı", "morning"]
  },
  {
    id: 53,
    category: "Restaurants",
    input: "Vegan restaurants in Cihangir",
    expectedTopics: ["vegan", "Cihangir", "plant-based", "healthy"]
  },
  {
    id: 54,
    category: "Restaurants",
    input: "Late night food delivery in Şişli",
    expectedTopics: ["late night", "food delivery", "Şişli", "24 hour"]
  },
  {
    id: 55,
    category: "Restaurants",
    input: "Authentic Ottoman cuisine restaurants",
    expectedTopics: ["Ottoman cuisine", "authentic", "historical", "traditional"]
  },
  {
    id: 56,
    category: "Restaurants",
    input: "Fish restaurants in Kumkapı",
    expectedTopics: ["fish", "seafood", "Kumkapı", "fresh"]
  },
  {
    id: 57,
    category: "Restaurants",
    input: "Michelin starred restaurants Istanbul",
    expectedTopics: ["Michelin", "fine dining", "starred", "luxury"]
  },
  {
    id: 58,
    category: "Restaurants",
    input: "Student-friendly cheap eats Beyazıt",
    expectedTopics: ["student", "cheap", "budget", "Beyazıt"]
  },
  {
    id: 59,
    category: "Restaurants",
    input: "Gluten-free restaurants Nişantaşı",
    expectedTopics: ["gluten-free", "Nişantaşı", "dietary", "healthy"]
  },
  {
    id: 60,
    category: "Restaurants",
    input: "Best meze restaurants Beyoğlu",
    expectedTopics: ["meze", "Beyoğlu", "appetizers", "Turkish"]
  },
  {
    id: 61,
    category: "Restaurants",
    input: "International cuisine Levent",
    expectedTopics: ["international", "Levent", "world food", "diverse"]
  },
  {
    id: 62,
    category: "Restaurants",
    input: "Historic restaurant Ottoman era",
    expectedTopics: ["historic", "Ottoman", "heritage", "traditional"]
  },
  {
    id: 63,
    category: "Restaurants",
    input: "Turkish pizza pide best places",
    expectedTopics: ["pide", "Turkish pizza", "traditional", "bread"]
  },
  {
    id: 64,
    category: "Restaurants",
    input: "Dessert shops baklava Turkish delight",
    expectedTopics: ["dessert", "baklava", "Turkish delight", "sweets"]
  },
  {
    id: 65,
    category: "Restaurants",
    input: "Food markets fresh produce Kadıköy",
    expectedTopics: ["food market", "fresh produce", "Kadıköy", "local"]
  },
  {
    id: 66,
    category: "Restaurants",
    input: "Rooftop dining with city view",
    expectedTopics: ["rooftop", "dining", "city view", "panoramic"]
  },
  {
    id: 67,
    category: "Restaurants",
    input: "Traditional Turkish coffee houses",
    expectedTopics: ["Turkish coffee", "traditional", "coffee house", "cultural"]
  },
  {
    id: 68,
    category: "Restaurants",
    input: "Waterfront restaurants Golden Horn",
    expectedTopics: ["waterfront", "Golden Horn", "view", "scenic"]
  },
  {
    id: 69,
    category: "Restaurants",
    input: "Family restaurants with kids menu",
    expectedTopics: ["family", "kids menu", "child-friendly", "families"]
  },
  {
    id: 70,
    category: "Restaurants",
    input: "Business lunch restaurants Maslak",
    expectedTopics: ["business lunch", "Maslak", "office", "quick"]
  },
  {
    id: 71,
    category: "Restaurants",
    input: "Turkish barbecue ocakbaşı restaurants",
    expectedTopics: ["ocakbaşı", "Turkish barbecue", "grill", "meat"]
  },
  {
    id: 72,
    category: "Restaurants",
    input: "Breakfast restaurants with Bosphorus view",
    expectedTopics: ["breakfast", "Bosphorus view", "morning", "scenic"]
  },
  {
    id: 73,
    category: "Restaurants",
    input: "Organic food restaurants Etiler",
    expectedTopics: ["organic", "Etiler", "healthy", "natural"]
  },
  {
    id: 74,
    category: "Restaurants",
    input: "Turkish street food tours",
    expectedTopics: ["street food", "tours", "local", "walking"]
  },
  {
    id: 75,
    category: "Restaurants",
    input: "Wine bars and restaurants Galata",
    expectedTopics: ["wine bar", "Galata", "alcohol", "evening"]
  },

  // ADDITIONAL ATTRACTIONS & LANDMARKS (20 questions)
  {
    id: 76,
    category: "Attractions",
    input: "Secret underground passages Istanbul",
    expectedTopics: ["underground", "secret", "passages", "hidden"]
  },
  {
    id: 77,
    category: "Attractions",
    input: "Byzantine ruins and walls",
    expectedTopics: ["Byzantine", "ruins", "walls", "ancient"]
  },
  {
    id: 78,
    category: "Attractions",
    input: "Bosphorus cruise best times",
    expectedTopics: ["Bosphorus cruise", "best times", "boat", "tour"]
  },
  {
    id: 79,
    category: "Attractions",
    input: "Photography spots sunrise sunset",
    expectedTopics: ["photography", "sunrise", "sunset", "scenic"]
  },
  {
    id: 80,
    category: "Attractions",
    input: "Free attractions and activities",
    expectedTopics: ["free", "attractions", "budget", "no cost"]
  },
  {
    id: 81,
    category: "Attractions",
    input: "Islamic architecture examples",
    expectedTopics: ["Islamic architecture", "mosques", "design", "religious"]
  },
  {
    id: 82,
    category: "Attractions",
    input: "Ottoman palaces to visit",
    expectedTopics: ["Ottoman palaces", "royal", "architecture", "history"]
  },
  {
    id: 83,
    category: "Attractions",
    input: "Historic hammam Turkish baths",
    expectedTopics: ["hammam", "Turkish bath", "historic", "traditional"]
  },
  {
    id: 84,
    category: "Attractions",
    input: "Princes Islands day trip",
    expectedTopics: ["Princes Islands", "day trip", "ferry", "escape"]
  },
  {
    id: 85,
    category: "Attractions",
    input: "City walls and fortifications",
    expectedTopics: ["city walls", "fortifications", "Byzantine", "defense"]
  },
  {
    id: 86,
    category: "Attractions",
    input: "Antique shopping areas",
    expectedTopics: ["antique", "shopping", "vintage", "collectibles"]
  },
  {
    id: 87,
    category: "Attractions",
    input: "Religious sites different faiths",
    expectedTopics: ["religious sites", "different faiths", "churches", "synagogues"]
  },
  {
    id: 88,
    category: "Attractions",
    input: "Modern architecture buildings",
    expectedTopics: ["modern architecture", "contemporary", "buildings", "design"]
  },
  {
    id: 89,
    category: "Attractions",
    input: "Gardens and parks for relaxation",
    expectedTopics: ["gardens", "parks", "relaxation", "green spaces"]
  },
  {
    id: 90,
    category: "Attractions",
    input: "Historical bridges in Istanbul",
    expectedTopics: ["historical bridges", "architecture", "spanning", "connection"]
  },
  {
    id: 91,
    category: "Attractions",
    input: "Art galleries contemporary exhibitions",
    expectedTopics: ["art galleries", "contemporary", "exhibitions", "modern art"]
  },
  {
    id: 92,
    category: "Attractions",
    input: "Observation decks city views",
    expectedTopics: ["observation decks", "city views", "panoramic", "height"]
  },
  {
    id: 93,
    category: "Attractions",
    input: "Archaeological sites and excavations",
    expectedTopics: ["archaeological", "excavations", "ancient", "history"]
  },
  {
    id: 94,
    category: "Attractions",
    input: "Cultural centers and events",
    expectedTopics: ["cultural centers", "events", "arts", "community"]
  },
  {
    id: 95,
    category: "Attractions",
    input: "Vintage trams and historic transport",
    expectedTopics: ["vintage tram", "historic transport", "nostalgic", "old"]
  },

  // ADDITIONAL DISTRICTS & NEIGHBORHOODS (15 questions)
  {
    id: 96,
    category: "Districts",
    input: "Explore Fener and Balat neighborhoods",
    expectedTopics: ["Fener", "Balat", "colorful", "historic"]
  },
  {
    id: 97,
    category: "Districts",
    input: "Trendy areas for young professionals",
    expectedTopics: ["trendy", "young professionals", "modern", "lifestyle"]
  },
  {
    id: 98,
    category: "Districts",
    input: "Family-friendly neighborhoods",
    expectedTopics: ["family-friendly", "neighborhoods", "safe", "residential"]
  },
  {
    id: 99,
    category: "Districts",
    input: "Bohemian artistic districts",
    expectedTopics: ["bohemian", "artistic", "creative", "alternative"]
  },
  {
    id: 100,
    category: "Districts",
    input: "Luxury shopping districts",
    expectedTopics: ["luxury shopping", "upscale", "boutiques", "high-end"]
  },
  {
    id: 101,
    category: "Districts",
    input: "Historic Jewish quarter",
    expectedTopics: ["Jewish quarter", "historic", "synagogue", "heritage"]
  },
  {
    id: 102,
    category: "Districts",
    input: "Student areas near universities",
    expectedTopics: ["student areas", "universities", "academic", "young"]
  },
  {
    id: 103,
    category: "Districts",
    input: "Waterfront promenade areas",
    expectedTopics: ["waterfront", "promenade", "walking", "seaside"]
  },
  {
    id: 104,
    category: "Districts",
    input: "Business and financial districts",
    expectedTopics: ["business", "financial", "commercial", "offices"]
  },
  {
    id: 105,
    category: "Districts",
    input: "Traditional craftsmen neighborhoods",
    expectedTopics: ["traditional craftsmen", "artisans", "workshops", "handmade"]
  },
  {
    id: 106,
    category: "Districts",
    input: "Hip cafes and coworking areas",
    expectedTopics: ["hip cafes", "coworking", "digital nomads", "modern"]
  },
  {
    id: 107,
    category: "Districts",
    input: "Conservative traditional areas",
    expectedTopics: ["conservative", "traditional", "religious", "cultural"]
  },
  {
    id: 108,
    category: "Districts",
    input: "Expat community neighborhoods",
    expectedTopics: ["expat", "international", "foreign", "community"]
  },
  {
    id: 109,
    category: "Districts",
    input: "Asian side hidden gems",
    expectedTopics: ["Asian side", "hidden gems", "Anatolia", "local"]
  },
  {
    id: 110,
    category: "Districts",
    input: "Nightlife entertainment districts",
    expectedTopics: ["nightlife", "entertainment", "bars", "clubs"]
  },

  // TRANSPORTATION & PRACTICAL (20 questions)
  {
    id: 111,
    category: "Transportation",
    input: "Metro lines and connections map",
    expectedTopics: ["metro", "lines", "connections", "map"]
  },
  {
    id: 112,
    category: "Transportation",
    input: "Taxi rates and ride sharing apps",
    expectedTopics: ["taxi", "rates", "ride sharing", "apps"]
  },
  {
    id: 113,
    category: "Transportation",
    input: "Bus routes to main attractions",
    expectedTopics: ["bus routes", "attractions", "public transport", "stops"]
  },
  {
    id: 114,
    category: "Transportation",
    input: "Dolmuş shared taxis explained",
    expectedTopics: ["dolmuş", "shared taxi", "local transport", "routes"]
  },
  {
    id: 115,
    category: "Transportation",
    input: "Car rental and driving tips",
    expectedTopics: ["car rental", "driving", "traffic", "parking"]
  },
  {
    id: 116,
    category: "Transportation",
    input: "Walking routes between districts",
    expectedTopics: ["walking routes", "districts", "pedestrian", "safe"]
  },
  {
    id: 117,
    category: "Transportation",
    input: "Bike rental and cycling paths",
    expectedTopics: ["bike rental", "cycling", "paths", "bicycle"]
  },
  {
    id: 118,
    category: "Transportation",
    input: "Ferry schedules all routes",
    expectedTopics: ["ferry", "schedules", "routes", "sea transport"]
  },
  {
    id: 119,
    category: "Transportation",
    input: "Airport shuttle services",
    expectedTopics: ["airport shuttle", "services", "transfer", "connection"]
  },
  {
    id: 120,
    category: "Transportation",
    input: "Transport for disabled accessibility",
    expectedTopics: ["disabled accessibility", "wheelchair", "accessible", "transport"]
  },
  {
    id: 121,
    category: "Practical",
    input: "ATMs and currency exchange locations",
    expectedTopics: ["ATM", "currency exchange", "money", "banking"]
  },
  {
    id: 122,
    category: "Practical",
    input: "Free WiFi hotspots around city",
    expectedTopics: ["free WiFi", "internet", "hotspots", "connectivity"]
  },
  {
    id: 123,
    category: "Practical",
    input: "Tourist information centers",
    expectedTopics: ["tourist information", "help centers", "assistance", "guides"]
  },
  {
    id: 124,
    category: "Practical",
    input: "Pharmacy and medical services",
    expectedTopics: ["pharmacy", "medical", "healthcare", "doctor"]
  },
  {
    id: 125,
    category: "Practical",
    input: "Turkish language basic phrases",
    expectedTopics: ["Turkish language", "phrases", "basic", "communication"]
  },
  {
    id: 126,
    category: "Practical",
    input: "Istanbul Museum Pass benefits",
    expectedTopics: ["Museum Pass", "benefits", "discounts", "entry"]
  },
  {
    id: 127,
    category: "Practical",
    input: "Lost and found services",
    expectedTopics: ["lost and found", "missing items", "assistance", "help"]
  },
  {
    id: 128,
    category: "Practical",
    input: "Turkish customs and etiquette",
    expectedTopics: ["customs", "etiquette", "culture", "behavior"]
  },
  {
    id: 129,
    category: "Practical",
    input: "Safety tips for solo travelers",
    expectedTopics: ["safety", "solo travel", "precautions", "security"]
  },
  {
    id: 130,
    category: "Practical",
    input: "Public restrooms and facilities",
    expectedTopics: ["restrooms", "facilities", "public", "WC"]
  },

  // CULTURE & EVENTS (10 questions)
  {
    id: 131,
    category: "Culture",
    input: "Traditional Turkish music venues",
    expectedTopics: ["Turkish music", "traditional", "venues", "cultural"]
  },
  {
    id: 132,
    category: "Culture",
    input: "Folk dance performances",
    expectedTopics: ["folk dance", "performances", "traditional", "cultural"]
  },
  {
    id: 133,
    category: "Culture",
    input: "Whirling dervish ceremonies",
    expectedTopics: ["whirling dervish", "ceremony", "spiritual", "Sufi"]
  },
  {
    id: 134,
    category: "Culture",
    input: "Istanbul Biennial art festival",
    expectedTopics: ["Istanbul Biennial", "art festival", "contemporary", "international"]
  },
  {
    id: 135,
    category: "Culture",
    input: "Ramadan celebrations and traditions",
    expectedTopics: ["Ramadan", "celebrations", "traditions", "Islamic"]
  },
  {
    id: 136,
    category: "Culture",
    input: "Traditional craft workshops",
    expectedTopics: ["craft workshops", "traditional", "handmade", "artisan"]
  },
  {
    id: 137,
    category: "Culture",
    input: "Turkish cinema and film festivals",
    expectedTopics: ["Turkish cinema", "film festival", "movies", "cultural"]
  },
  {
    id: 138,
    category: "Culture",
    input: "Literary cafes and book readings",
    expectedTopics: ["literary cafes", "books", "readings", "intellectual"]
  },
  {
    id: 139,
    category: "Culture",
    input: "Cultural exchange programs",
    expectedTopics: ["cultural exchange", "programs", "international", "learning"]
  },
  {
    id: 140,
    category: "Culture",
    input: "Traditional festivals throughout year",
    expectedTopics: ["festivals", "traditional", "seasonal", "celebrations"]
  },

  // SHOPPING & MARKETS (10 questions)
  {
    id: 141,
    category: "Shopping",
    input: "Local markets for authentic goods",
    expectedTopics: ["local markets", "authentic", "handmade", "traditional"]
  },
  {
    id: 142,
    category: "Shopping",
    input: "Vintage and second-hand shops",
    expectedTopics: ["vintage", "second-hand", "thrift", "unique"]
  },
  {
    id: 143,
    category: "Shopping",
    input: "Turkish carpet buying guide",
    expectedTopics: ["Turkish carpet", "buying guide", "authentic", "quality"]
  },
  {
    id: 144,
    category: "Shopping",
    input: "Spice market and Turkish delights",
    expectedTopics: ["spice market", "Turkish delight", "food", "traditional"]
  },
  {
    id: 145,
    category: "Shopping",
    input: "Modern malls and shopping centers",
    expectedTopics: ["modern malls", "shopping centers", "retail", "brands"]
  },
  {
    id: 146,
    category: "Shopping",
    input: "Handmade jewelry and accessories",
    expectedTopics: ["handmade jewelry", "accessories", "artisan", "unique"]
  },
  {
    id: 147,
    category: "Shopping",
    input: "Turkish textile and leather goods",
    expectedTopics: ["Turkish textile", "leather goods", "quality", "fashion"]
  },
  {
    id: 148,
    category: "Shopping",
    input: "Art and craft souvenirs",
    expectedTopics: ["art", "craft", "souvenirs", "gifts"]
  },
  {
    id: 149,
    category: "Shopping",
    input: "Bargaining tips in markets",
    expectedTopics: ["bargaining", "markets", "negotiation", "tips"]
  },
  {
    id: 150,
    category: "Shopping",
    input: "Tax-free shopping for tourists",
    expectedTopics: ["tax-free", "shopping", "tourists", "refund"]
  }
];

// Function to test chatbot with extended inputs
export const testExtendedInputs = async (sendMessage, categoryFilter = 'all', maxTests = 10) => {
  let inputsToTest = extendedTestInputs;
  
  // Filter by category if specified
  if (categoryFilter !== 'all') {
    inputsToTest = extendedTestInputs.filter(input => 
      input.category.toLowerCase() === categoryFilter.toLowerCase()
    );
  }
  
  // Limit number of tests
  if (maxTests && maxTests < inputsToTest.length) {
    inputsToTest = inputsToTest.slice(0, maxTests);
  }
  
  const results = [];
  
  for (let i = 0; i < inputsToTest.length; i++) {
    const testCase = inputsToTest[i];
    console.log(`Testing ${i + 1}/${inputsToTest.length}: ${testCase.input}`);
    
    try {
      const response = await sendMessage(testCase.input);
      
      // Analyze response quality
      const topicMatches = testCase.expectedTopics.filter(topic =>
        response.toLowerCase().includes(topic.toLowerCase())
      ).length;
      
      const topicCoverage = topicMatches / testCase.expectedTopics.length;
      const isMeaningful = response.length > 50 && !response.startsWith("Sorry, I couldn't");
      const isDetailed = response.length > 200;
      
      results.push({
        ...testCase,
        response: response,
        success: true,
        responseLength: response.length,
        topicMatches: topicMatches,
        topicCoverage: topicCoverage,
        isMeaningful: isMeaningful,
        isDetailed: isDetailed,
        timestamp: new Date().toISOString()
      });
    } catch (error) {
      results.push({
        ...testCase,
        response: null,
        success: false,
        error: error.message,
        timestamp: new Date().toISOString()
      });
    }
    
    // Add delay between requests to avoid overwhelming the API
    await new Promise(resolve => setTimeout(resolve, 1500));
  }
  
  return results;
};

// Function to analyze extended test results
export const analyzeExtendedResults = (results) => {
  const analysis = {
    totalTests: results.length,
    successful: results.filter(r => r.success).length,
    meaningful: results.filter(r => r.isMeaningful).length,
    detailed: results.filter(r => r.isDetailed).length,
    avgTopicCoverage: 0,
    categories: {},
    qualityDistribution: {
      excellent: 0,  // >80% topic coverage, meaningful, detailed
      good: 0,       // >60% topic coverage, meaningful
      fair: 0,       // >40% topic coverage, meaningful
      poor: 0        // <40% topic coverage or not meaningful
    }
  };
  
  // Calculate average topic coverage
  const successfulResults = results.filter(r => r.success);
  if (successfulResults.length > 0) {
    analysis.avgTopicCoverage = successfulResults.reduce((sum, r) => 
      sum + (r.topicCoverage || 0), 0) / successfulResults.length;
  }
  
  // Analyze by category
  results.forEach(result => {
    const cat = result.category;
    if (!analysis.categories[cat]) {
      analysis.categories[cat] = {
        total: 0,
        successful: 0,
        meaningful: 0,
        detailed: 0,
        avgTopicCoverage: 0,
        topicCoverageSum: 0,
        topicCoverageCount: 0
      };
    }
    
    const catStats = analysis.categories[cat];
    catStats.total++;
    
    if (result.success) {
      catStats.successful++;
      if (result.topicCoverage !== undefined) {
        catStats.topicCoverageSum += result.topicCoverage;
        catStats.topicCoverageCount++;
      }
    }
    if (result.isMeaningful) catStats.meaningful++;
    if (result.isDetailed) catStats.detailed++;
    
    // Quality assessment
    if (result.success && result.isMeaningful) {
      const coverage = result.topicCoverage || 0;
      if (coverage > 0.8 && result.isDetailed) {
        analysis.qualityDistribution.excellent++;
      } else if (coverage > 0.6) {
        analysis.qualityDistribution.good++;
      } else if (coverage > 0.4) {
        analysis.qualityDistribution.fair++;
      } else {
        analysis.qualityDistribution.poor++;
      }
    } else {
      analysis.qualityDistribution.poor++;
    }
  });
  
  // Calculate average topic coverage by category
  Object.keys(analysis.categories).forEach(cat => {
    const catStats = analysis.categories[cat];
    if (catStats.topicCoverageCount > 0) {
      catStats.avgTopicCoverage = catStats.topicCoverageSum / catStats.topicCoverageCount;
    }
  });
  
  return analysis;
};

// Export extended test inputs by category
export const extendedTestsByCategory = {
  restaurants: extendedTestInputs.filter(t => t.category === "Restaurants"),
  attractions: extendedTestInputs.filter(t => t.category === "Attractions"),
  districts: extendedTestInputs.filter(t => t.category === "Districts"),
  transportation: extendedTestInputs.filter(t => t.category === "Transportation"),
  culture: extendedTestInputs.filter(t => t.category === "Culture"),
  shopping: extendedTestInputs.filter(t => t.category === "Shopping"),
  practical: extendedTestInputs.filter(t => t.category === "Practical")
};

// Combined test inputs (original + extended)
export const allTestInputs = [
  // Note: Original testInputs would be imported and combined here
  ...extendedTestInputs
];

export default extendedTestInputs;
